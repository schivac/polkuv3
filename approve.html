<!DOCTYPE html>
<html>
<head>
  <title>Approval System</title>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script type="module" src="assets/js/firebase.js"></script>
</head>
<body>
  <script type="module">
    import { db } from './assets/js/firebase.js';

    // Ambil UID dari URL
    const urlParams = new URLSearchParams(window.location.search);
    const uid = urlParams.get('uid');

    if (!uid) {
      Swal.fire('Error!', 'UID tidak valid.', 'error');
    } else {
      // Update status user jadi "approved"
      await db.collection('pendingUsers').doc(uid).update({ status: 'approved' });
      
      Swal.fire(
        'Disetujui!', 
        'User telah aktif.', 
        'success'
      ).then(() => window.close());
    }
  </script>
</body>
</html>